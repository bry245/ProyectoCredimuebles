
@{
    ViewData["Title"] = "ListadoBono";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container">
	<div class="container mt-4">
		<a href="@Url.Action("CrearVenta","Salidas")" class="btn" type="submit" id="button-addon2"> <i class="">Agregar Cuenta</i>  </a>
		<div class="row justify-content-end">
			<div class="col-md-6">
				
				<form action="#" method="GET" class="form-inline">
					<div class="input-group">
						<input type="text" class="form-control" placeholder="Buscar..." aria-label="Buscar" aria-describedby="button-addon2">
						<div class="input-group-append">
						</div>
						<button class="btn" type="submit" id="button-addon2"> <i class=" fa fa-search"></i> </button>
					</div>
				</form>
				
			</div>
		</div>
	
	</div>


	<div class="container mt-4">
		<table class="table table-hover" style="text-align:center">
			<thead>
				<tr>
					<th>Cliente</th>
					<th>Contacto</th>
					<th>Dirección</th>
					<th>Correo Electrónico</th>
					<th>Teléfono</th>
					<th>Restante para abonar </th>
					<th>Acciones</th>
					<th>Notificar</th>
				</tr>
			</thead>
			<tbody>

				<tr>
					<td>12345</td>
					<td>2024-04-10</td>
					<td>Producto 1</td>
					<td>5</td>
					<td>$50.00</td>
					<td>$250.00</td>
					
                    <td style="text-align:center">
                        <button class="btn btn-danger" id="confirmButtonInactivar">Inactivar</button>

                        <a href="@Url.Action("EditarVenta","Salidas")" class="btn btn-danger" data-toggle="modal" id="btn-Modal">Editar</a>
                        
                    
                    </td>
                   
					</td>

                    <td style="text-align:center"><button class="btn btn-danger" onclick="enviarNotificacion()"> <i class="fa fa-envelope" aria-hidden="true"></i></button></td>

				<tr>
					<td>12345</td>
					<td>2024-04-10</td>
					<td>Producto 1</td>
					<td>5</td>
					<td>$50.00</td>
					<td>$250.00</td>
					<td style="text-align:center">

                        <button class="btn btn-danger" id="confirmButtonInactivar">Inactivar</button>
						<a href="@Url.Action("EditarVenta","Salidas")" class="btn btn-danger" data-toggle="modal" id="btn-Modal">Editar</a>
					</td>

                    <td style="text-align:center"><button class="btn btn-danger" onclick="enviarNotificacion()"> <i class="fa fa-envelope" aria-hidden="true"></i></button></td>
                </tr>


				<tr>
					<td>12345</td>
					<td>2024-04-10</td>
					<td>Producto 1</td>
					<td>5</td>
					<td>$50.00</td>
					<td>$250.00</td>
					<td style="text-align:center">
						<button class="btn btn-danger" data-toggle="modal" id="btn-Modal">Eliminar</button>
						<a href="@Url.Action("EditarVenta","Salidas")" class="btn btn-danger" data-toggle="modal" id="btn-Modal">Editar</a>
					</td>

                    <td style="text-align:center"><button class="btn btn-danger" onclick="enviarNotificacion()"> <i class="fa fa-envelope" aria-hidden="true"></i></button></td>
                </tr>
			
			

			</tbody>
		</table>
	</div>

	<nav aria-label="Page navigation example" style="background-color:white">
		<ul class="pagination justify-content-center" style="background-color:#dce5e4">
			<li class="page-item disabled">
				<a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
			</li>
			<li class="page-item"><a class="page-link" href="#">1</a></li>
			<li class="page-item"><a class="page-link" href="#">2</a></li>
			<li class="page-item"><a class="page-link" href="#">3</a></li>
			<li class="page-item">
				<a class="page-link" href="#">Siguiente</a>
			</li>
		</ul>
	</nav>

</div>




@section Scripts {

    <script>
        // Obtener el modal Para actualizar
        var modal = document.getElementById("ModalClientes");

        // Obtener el botón que abre el btn
        var btnsMostrarModal = document.getElementById("btn-Modal");

        // Obtener el span que cierra el modal
        var span = document.getElementsByClassName("btn-close")[0];
        var cerrar = document.getElementById("btn-cerrar");



        function enviarNotificacion() {
            // Configuración del SweetAlert para enviar notificaciones
            Swal.fire({
                title: 'Enviar Notificación',
                html: `
                                    <div class="mb-3">
                                        <label class="form-label">Usuario:</label>
                                        <input type="text" class="form-control" id="usuario" readonly value="Usuario Ejemplo">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Mensaje:</label>
                                        <textarea class="form-control" id="mensaje" rows="5" placeholder="Escribe tu mensaje aquí..."></textarea>
                                    </div>
                                `,
                showCancelButton: true,
                confirmButtonText: 'Enviar',
                cancelButtonText: 'Cancelar',
                focusConfirm: false,
                preConfirm: () => {
                    // Aquí puedes agregar la lógica para enviar la notificación
                    const mensaje = document.getElementById('mensaje').value;
                    // Aquí puedes enviar el mensaje
                    console.log('Mensaje enviado:', mensaje);
                }
            });
        }



        function verDetalles() {
            // Configuración del modal de SweetAlert
            Swal.fire({
                title: 'Detalles del Usuario',
                html: `
                                    <form>
                                        <div class="mb-3 row">
                                            <label for="nombre" class="col-sm-3 col-form-label text-sm-end">Nombre:</label>
                                            <div class="col-sm-9">
                                                <input type="text" id="nombre" class="form-control" value="Juan Pérez" readonly style="border: none;">
                                            </div>
                                        </div>

                                        <div class="mb-3 row">
                                            <label for="email" class="col-sm-3 col-form-label text-sm-end">Correo Electrónico:</label>
                                            <div class="col-sm-9">
                                                <input type="email" id="email" class="form-control" value="juan@example.com" readonly style="border: none;">
                                            </div>
                                        </div>

                                        <div class="mb-3 row">
                                            <label for="telefono" class="col-sm-3 col-form-label text-sm-end">Teléfono:</label>
                                            <div class="col-sm-9">
                                                <input type="tel" id="telefono" class="form-control" value="123456789" readonly style="border: none;">
                                            </div>
                                        </div>

                                        <div class="mb-3 row">
                                            <label for="direccion" class="col-sm-3 col-form-label text-sm-end">Dirección:</label>
                                            <div class="col-sm-9">
                                                <textarea id="direccion" class="form-control" readonly style="border: none;">Calle Principal, Ciudad</textarea>
                                            </div>
                                        </div>
                                    </form>
                                `,
                confirmButtonText: 'Cerrar',
                showCancelButton: false,
                focusConfirm: false,
                width: '40%'
            });
        }

        document.getElementById('confirmButtonInactivar').addEventListener('click', function () {
            // Muestra una SweetAlert con las opciones de confirmar o cancelar
            Swal.fire({
                title: '¿Estás seguro?',
                text: "¡No podrás revertir esto!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#0d6efd',
                cancelButtonColor: '#c31e1e',
                confirmButtonText: 'Sí, inactivar usuario',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                // Si el usuario confirma, puedes ejecutar la acción aquí
                if (result.isConfirmed) {
                    // Aquí puedes ejecutar el código para inactivar el usuario
                    // Por ejemplo, puedes enviar una solicitud AJAX para realizar la acción
                    // Después de completar la acción, puedes mostrar una alerta de éxito
                    Swal.fire(
                        '¡Inactivado!',
                        'El usuario ha sido inactivado.',
                        'success'
                    )
                }
            })
        });



        btnsMostrarModal.onclick = function () {
            // Obtener el ID de la fila de la tabla
            // var id = this.getAttribute("data-id");

            // Llamar a una función para cargar la información detallada (debes implementarla)
            // cargarInformacionDetalle(id);

            // Mostrar el modal
            modal.style.display = "block";
            document.body.classList.add("modal-open");
        }

        // Manejar clic en el span para cerrar el modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // Cuando el usuario hace clic fuera del modal, ciérralo
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Función para cargar la información detallada (debes implementarla)
        function cargarInformacionDetalle(id) {
            // Aquí puedes usar AJAX para cargar la información desde el servidor
            // Por ejemplo, puedes hacer una llamada a un controlador de ASP.NET Core
            // y devolver la información detallada en formato JSON, luego mostrarla en el modal.
        }

    </script>


}
